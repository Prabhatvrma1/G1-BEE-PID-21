<%- include('../partials/header') %>
<div class="row g-4">
	<div class="col-lg-4">
		<div class="card">
			<div class="card-body">
				<h4 class="card-title mb-3">Add New Talent</h4>
				<form method="post" action="/talent">
					<input type="hidden" name="_csrf" value="<%= csrfToken %>">
					<div class="mb-3">
						<label class="form-label">Title</label>
						<input class="form-control" name="title" placeholder="e.g. Full Stack Developer" required>
					</div>
					<div class="mb-3">
						<label class="form-label">Skills (comma separated)</label>
						<input class="form-control" name="skills" placeholder="React, Node.js, MongoDB">
						<div class="form-text">Separate multiple skills with commas</div>
					</div>
					<div class="mb-3">
						<label class="form-label">Bio</label>
						<textarea class="form-control" name="bio" rows="3" placeholder="Describe your experience and expertise..."></textarea>
					</div>
					<div class="mb-3">
						<label class="form-label">Location</label>
						<input class="form-control" name="location" placeholder="City, Country">
					</div>
					<button class="btn btn-primary w-100">Add Talent</button>
				</form>
			</div>
		</div>
		
		<!-- Skills Summary Card -->
		<div class="card mt-4">
			<div class="card-body">
				<h5 class="card-title">Your Skills Summary</h5>
				<% 
					const allSkills = [];
					talents.forEach(t => {
						t.skills.forEach(skill => {
							if (skill.trim() && !allSkills.includes(skill.trim())) {
								allSkills.push(skill.trim());
							}
						});
					});
				%>
				<% if (allSkills.length > 0) { %>
					<div class="d-flex flex-wrap gap-2">
						<% allSkills.forEach(skill => { %>
							<span class="badge bg-primary" style="font-size: 0.85rem; padding: 0.4rem 0.6rem;">
								<%= skill %>
							</span>
						<% }) %>
					</div>
					<div class="mt-3">
						<small class="text-muted">
							<strong><%= allSkills.length %></strong> unique skills across <strong><%= talents.length %></strong> talent profiles
						</small>
					</div>
				<% } else { %>
					<div class="text-muted">
						<small>No skills added yet. Create your first talent profile!</small>
					</div>
				<% } %>
			</div>
		</div>
	</div>
	
	<div class="col-lg-8">
		<div class="d-flex justify-content-between align-items-center mb-4">
			<h4 class="mb-0">Your Talent Profiles</h4>
			<span class="badge bg-secondary"><%= talents.length %> profiles</span>
		</div>
		
		<% if (talents.length === 0) { %>
			<div class="card">
				<div class="card-body text-center py-5">
					<div class="mb-3">
						<i class="fas fa-user-plus" style="font-size: 3rem; color: #4c63d2;"></i>
					</div>
					<h5 class="text-muted">No talent profiles yet</h5>
					<p class="text-muted">Create your first talent profile to showcase your skills to recruiters!</p>
				</div>
			</div>
		<% } else { %>
			<% talents.forEach((t, index) => { %>
				<div class="card mb-4">
					<div class="card-body">
						<form method="post" action="/talent/<%= t._id %>">
							<input type="hidden" name="_csrf" value="<%= csrfToken %>">
							
							<div class="row g-3">
								<div class="col-md-6">
									<label class="form-label fw-bold">Profile Title</label>
									<input class="form-control" name="title" value="<%= t.title %>" placeholder="e.g. Full Stack Developer">
								</div>
								<div class="col-md-6">
									<label class="form-label fw-bold">Location</label>
									<input class="form-control" name="location" value="<%= t.location %>" placeholder="City, Country">
								</div>
								
								<div class="col-12">
									<label class="form-label fw-bold">Skills</label>
									<input class="form-control" name="skills" value="<%= t.skills.join(', ') %>" placeholder="React, Node.js, MongoDB">
									<div class="form-text">Separate multiple skills with commas</div>
								</div>
								
								<div class="col-12">
									<label class="form-label fw-bold">Bio</label>
									<textarea class="form-control" name="bio" rows="3" placeholder="Describe your experience..."><%= t.bio %></textarea>
								</div>
								
								<div class="col-12">
									<div class="d-flex gap-2 justify-content-end">
										<button type="submit" class="btn btn-primary">
											<i class="fas fa-save me-1"></i>Save Changes
										</button>
										<button type="button" class="btn btn-outline-secondary" data-bs-toggle="collapse" data-bs-target="#skillsPreview<%= index %>">
											<i class="fas fa-eye me-1"></i>Preview Skills
										</button>
									</div>
								</div>
							</div>
						</form>
						
						<!-- Skills Preview -->
						<div class="collapse mt-3" id="skillsPreview<%= index %>">
							<div class="card card-body bg-light">
								<h6 class="fw-bold mb-2">Skills Preview:</h6>
								<% if (t.skills && t.skills.length > 0) { %>
									<div class="d-flex flex-wrap gap-2">
										<% t.skills.forEach(skill => { %>
											<% if (skill.trim()) { %>
												<span class="badge bg-info text-dark" style="font-size: 0.85rem; padding: 0.4rem 0.6rem;">
													<%= skill.trim() %>
												</span>
											<% } %>
										<% }) %>
									</div>
								<% } else { %>
									<span class="text-muted">No skills added yet</span>
								<% } %>
							</div>
						</div>
						
						<!-- Delete Form -->
						<div class="mt-3 pt-3 border-top">
							<form method="post" action="/talent/<%= t._id %>/delete" class="d-inline">
								<input type="hidden" name="_csrf" value="<%= csrfToken %>">
								<button type="submit" class="btn btn-outline-danger btn-sm" onclick="return confirm('Are you sure you want to delete this talent profile?')">
									<i class="fas fa-trash me-1"></i>Delete Profile
								</button>
							</form>
							<small class="text-muted ms-3">Created: <%= new Date(t.createdAt).toLocaleDateString() %></small>
						</div>
					</div>
				</div>
			<% }) %>
		<% } %>
	</div>
</div>

<style>
	.card {
		border: none;
		box-shadow: 0 2px 10px rgba(0,0,0,0.1);
		transition: all 0.3s ease;
	}
	
	.card:hover {
		transform: translateY(-2px);
		box-shadow: 0 8px 25px rgba(0,0,0,0.15);
	}
	
	.badge {
		border-radius: 20px;
		transition: all 0.3s ease;
	}
	
	.badge:hover {
		transform: scale(1.05);
	}
	
	.form-control:focus {
		border-color: #4c63d2;
		box-shadow: 0 0 0 0.2rem rgba(76, 99, 210, 0.25);
	}
	
	.btn-primary {
		background: linear-gradient(135deg,#4c63d2,#5a4fcf);
		border: none;
	}
	
	.btn-primary:hover {
		transform: translateY(-1px);
		box-shadow: 0 4px 15px rgba(76, 99, 210, 0.4);
	}
</style>

<%- include('../partials/footer') %>


